!function(e,t){function a(a,n,r){function s(e,t,a){return this.date>new Date(e,t,a+1)?"old-day":""}function i(e,t,a){return e===this.year&&t===this.month&&a===this.day?"current-day":""}function c(e,t,a){return""+e+this.style+(t+1)+this.style+a}function l(e,t,a){return'<td class="'+s.call(this,e,t,a)+i.call(this,e,t,a)+'" title="'+c.call(this,e,t,a)+'">'+a+"</td>"}if(!a||!a.nodeType)return!1;var h=arguments.callee,o=this;if(!(this instanceof h))return new h(a,n,r);var d=h.prototype;d.constructor=h;var u={meta:{year:"年",season:"季",season2:"季度",month:"月",week:["日","一","二","三","四","五","六"],week2:"周",day:"日",sel:"选择",cur:"本",prev:"上",next:"下",all:"全",today:"今"},dayTime:864e5},v=function(){var t=arguments.callee,a=t.prototype,n=n||document;return t.constructor=t,Object.keys||(Object.keys=function(e){var t=[];for(t[t.length]in e);return t}),a.is=function(e){return{}.toString.call(e).slice(8,-1)},a.each=function(e,t){var a,n=0,r=e.length>>>0,s="object"==typeof e;if(s){for(a in e)if(t.call(e[a],e[a],a)===!1)break}else for(;r>n&&t.call(e[n],e[n],n++)!==!1;);},a.createHtmlElement=function(e){t.element||(t.element={}),t.element[e]||(t.element[e]=n.createElement(e));var a=t.element[e].cloneNode(!0);return a},a.getEvent=function(t){return t||e.event},a.getTarget=function(e){return e.srcElement||e.target},a.addEvent=function(e,t,a,n){e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,n||!1):e["on"+t]=function(){a()}},a.trigger=function(e,t){var a;n.createEvent?(a=n.createEvent("MouseEvents"),a.initMouseEvent(t,!0,!0,n.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(a)):(a=n.createEventObject(),a.screenX=100,a.screenY=0,a.clientX=0,a.clientY=0,a.ctrlKey=!1,a.altKey=!1,a.shiftKey=!1,a.button=!1,e.fireEvent("on"+t,a))},e===this?new t:void 0},f=v()||{};d.init=function(){var e=5;return h.cache||(h.cache={}),this._parent_=a,this.date=new Date,n=n||{},this.frame=t.createDocumentFragment(),this.endYear=n.endYear||this.date.getFullYear()+e,this.startYear=isNaN(n.startYear)?this.date.getFullYear()-e:n.startYear,this.year=this.date.getFullYear(),this.month=this.date.getMonth(),this.day=this.date.getDate(),this.startYear=Math.max(1970,this.startYear),this.startYear=Math.min(this.startYear,this.year),this.time=+this.date,this.style=n.style||"-",n&&f.each(n,function(e,t){o[t]||(o[t]=e)}),this.Y&&this.M&&(this.M=Math.abs(this.M)-1),this.hasHeader=void 0===n.hasHeader?!0:n.hasHeader,this.hasFoot=this.hasFoot||!1,"function"==typeof r&&(this.callback=r),this.createProperty().controlsFactory().createCalFrame().createTableTitle().createYear().createMonth().addEvent(),this.start(),this},d.start=function(){var e=this.elems;return this.Y?(f.each(e.selectYear,function(t,a){e.selectedIndex=a}),e.selectYear.value=this.Y,e.selectMonth.selectedIndex=this.M,this.createDate(this.Y,this.M)):f.trigger(e.today,"click"),this},d.createProperty=function(){return this.elems={container:["div","class#cal-container"],header:["div","class#cal-header"],body:["div","class#cal-body"],selectYear:["select","class#select-year"],selectMonth:["select","class#select-month"],prev:["input","type#button,class#cal-prev,value#<"],next:["input","type#button,class#cal-next,value#>"],prevPro:["input","type#button,class#cal-prev-pro,value#«"],nextPro:["input","type#button,class#cal-next-pro,value#»"],today:["input","type#button,class#calToday,value#"+u.meta.today]},this},d.controlsFactory=function(){var e,t;return f.each(this.elems,function(a,n){e=f.createHtmlElement(a[0]),a[1]&&f.each(a[1].split(","),function(a){t=a.split("#"),t[0]&&e.setAttribute(t[0],t[1])}),o.elems[n]=e}),this},d.createCalFrame=function(){var e=this.elems,a=u.meta;return e.header.appendChild(e.prevPro),e.header.appendChild(e.prev),e.header.appendChild(e.selectYear),e.header.appendChild(t.createTextNode(a.year)),e.header.appendChild(e.selectMonth),e.header.appendChild(t.createTextNode(a.month)),e.header.appendChild(e.next),e.header.appendChild(e.nextPro),e.header.appendChild(e.today),!0===this.hasHeader&&e.container.appendChild(e.header),e.container.appendChild(e.body),this.frame.appendChild(e.container),"function"===this.ongetframe&&this.ongetframe.call(this,this.frame),this};var p={"selectYear:change":function(e){e=f.getEvent(e);var t=f.getTarget(e);o.createDate(t.value,o.elems.selectMonth.value)},"selectMonth:change":function(e){e=f.getEvent(e);var t=f.getTarget(e);o.createDate(o.elems.selectYear.value,t.value)},"body:click":function(e){e=f.getEvent(e);var t,a=f.getTarget(e);if(!/tr|th|tbody|thead|table/i.test(a.nodeName)){for(;"td"!==a.nodeName.toLowerCase();)a=a.parentNode;t=a.innerHTML}return!/thead|tfoot/i.test(a.parentNode.parentNode.nodeName)&&t&&o.getDateValue(t),o},"today:click":function(){var e=this.elems;e.selectYear.selectedIndex=o.year,e.selectYear.value=o.year,e.selectMonth.selectedIndex=o.month,e.selectMonth.value=o.month,o.createDate(o.year,o.month)},"next:click":function(){var e,t=this.elems,a=t.selectMonth,n=a.selectedIndex,r=t.selectYear;if(11>=n+1)e=n+1;else{if(r.value===o.endYear)return r.options[r.length-1].selected=" ",a.value=0,void o.createDate(r.value,a.value);e=0,r.selectedIndex=r.selectedIndex-1}a.value=e,a.selectedIndex=e,r.value&&o.createDate(r.value,a.value)},"nextPro:click":function(){var e=this.elems,t=+e.selectYear.value,a=e.selectMonth.value;t++>=o.endYear||(e.selectYear.selectedIndex=t,e.selectYear.value=t,o.createDate(t,a))},"prev:click":function(){var e,t=this.elems,a=t.selectMonth,n=a.selectedIndex,r=t.selectYear;n-1>=0?e=n-1:(r.value===o.startYear&&(r.selectedIndex=r.length),e=11,r.selectedIndex=r.selectedIndex+1),a.value=e,a.selectedIndex=e,r.value&&o.createDate(r.value,a.value)},"prevPro:click":function(){var e=this.elems,t=+e.selectYear.value,a=e.selectMonth.value;t--<=o.startYear||(e.selectYear.selectedIndex=t,e.selectYear.value=t,o.createDate(t,a))}};return d.addEvent=function(){for(var e=this.elems,t=Object.keys(p),a=t.length,n=function(t,a){t=t.split(":");var n=t[0],r=t[1];f.addEvent(e[n],r,function(e){"function"==typeof a&&a.call(o,e)},!1)};a--;)n(t[a],p[t[a]]);return this},d.getDateValue=function(e){var t=[];return t.push(+this.elems.selectYear.value||this.year),t.push(+this.elems.selectMonth.value+1||this.month),t.push(+e||this.day),this.selectDate=t,"function"==typeof this.ongetdate&&this.ongetdate.call(this,t),this},d.createTableTitle=function(){for(var e=u.meta.week,t=e.length,a=[];t--;)a.push('<th title="'+e[t]+'">'+e[t]+"</th>");return this.title="<thead>"+a.reverse().join("")+"</thead>",this},d.createYear=function(){for(var e=this.endYear-this.startYear+1;e--;){var t=this.endYear-e;this.elems.selectYear.options[e]=new Option(t,t,t===this.year)}return this},d.createMonth=function(){for(var e=12;e--;)this.elems.selectMonth.options[e]=new Option(e+1,e,e===this.month);return this},d.getMaxDays=function(e,t){var a=+t+1;return t=a>12?1:a,e=a>12?+e+1:e,new Date(+new Date(e,t,1)-u.dayTime).getDate()},d.getFirstDay=function(e,t){return new Date(e,t,1).getDay()},d.createDate=function(e,t){e=+e,t=+t,e=Math.max(this.startYear,e),e=Math.min(this.endYear,e),t=isNaN(t)?this.month:t,t=Math.max(t,0),t=Math.min(t,11);var a="_date_:"+e+":"+t,n=this.elems;return h.cache[a]||(h.cache[a]=this.getDateString(e,t)),this.render(n,a,e,t),this},d.getDateString=function(e,t){for(var a=this,n=this.getMaxDays(e,t),r=this.getFirstDay(e,t),s=n+r,i=[],c=Math.ceil(s/7),h=7*c,o=0;c>o;o++){i.push("</tr>");for(var d=0;7>d;d++)h--<=s&&n>0?i.push(l.call(this,e,t,n--)):i.push("<td></td>");i.push("<tr>")}return i=i.reverse().join(""),"function"==typeof this.ongetdatestring&&this.ongetdatestring.call(a,i),i},d.toString=function(){return this.selectDate.join(this.style)},d.valueOf=function(){return this.selectDate},d.render=function(e,t,a,n){var r,s=this,i=u.meta;return!0===this.hasFoot&&(r='<tfoot>   <tr>       <td colspan="7">'+a+i.year+(n+1)+i.month+"       </td>   </tr></tfoot>"),this.elems.body.innerHTML='<table cellpadding="5" border="1" cellspacing="0">'+this.title+h.cache[t]+(!0===this.hasFoot?r:"")+"</table>",this._parent_.appendChild(this.frame),"function"==typeof this.onrender&&this.onrender.call(s,this.frame),s},d.setCss=function(e){var t=[];return"Object"===f.is(e)&&f.each(e,function(e,a){t.push(a+":"+e)}),this.elems.container.style.cssText=t.join(";"),this},d.show=function(){return this.elems.container.style.display="block",this},d.hide=function(){return this.elems.container.style.display="none",this},this.init(),this.callback&&this.callback.call(this),this}"function"==typeof define&&define.amd?define("Datepicker",[],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:e.Datepicker||(e.Datepicker=a)}(this,document);